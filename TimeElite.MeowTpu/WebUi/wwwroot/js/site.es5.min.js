"use strict";(function(){$("#clear-legend").on("click",function(){$("#legend-show-block").css("display","none");$("#legend-edit-block").css("display","inline-flex");$(".events").each(function(n,t){return $(t).children().remove()});document.cookie="link=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"});$("form").on("submit",function(n){var t=$("#selector").selectize().val(),i="0;0;"+t+";";return document.location.href="/"+i,n.preventDefault(),!1});$("#save-legend").on("click",function(){$("form").submit()});$(".event").each(function(n,t){var i=$(t).data("hideid"),r=window.location.href;$(t).on("click",function(){r.includes(i)?window.location.href=window.location.href.replace(i,"").replace(",,",","):window.location.href+=i+","})});var n=$("#selector");n.selectize({valueField:"hash",labelField:"title",searchField:"html",maxItems:12,create:!1,score:function(){return function(){return 1}},render:{option:function(n){return"<div>"+n.html+"<\/div>"}},load:function(n,t){if(!n.length)return t();$.ajax({url:window.location.origin+"/api/Search?query="+encodeURIComponent(n),type:"GET",error:function(){t()},success:function(n){$("#selector").selectize()[0].selectize.clearOptions();t(n)}})}})})();