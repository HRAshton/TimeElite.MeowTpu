"use strict";(function(){var n=window.$,t=1;n("document").on("load",function(){n(".today")[0]&&n(".today")[0].scrollIntoView()});n("#clear-legend").on("click",function(){n("#legend-show-block").css("display","none");n("#legend-edit-block").css("display","inline-flex");n(".events").each(function(t,i){return n(i).children().remove()});document.cookie="link=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"});n("form").on("submit",function(t){var i=n("#selector").selectize().val(),r="0;0;"+i+";";return document.location.href="/?"+r,t.preventDefault(),!1});n("#save-legend").on("click",function(){n("form").submit()});n(".event").each(function(t,i){var r=n(i).data("hideid"),u=window.location.href;n(i).on("click",function(){u.includes(r)?window.location.href=window.location.href.replace(r,"").replace(",,",","):window.location.href+=r+","})});n("#next-page").on("click",function(){n("#matrix").empty();n("#matrix").append('<img class="spinner" src="/images/loading.svg"/>');var i=document.location.search.replace("?","");fetch("http://localhost:65222/GetElementsForWeek?"+ ++t+";"+i).then(function(t){t.text().then(function(t){n("#matrix").empty();n("#matrix").append(t)})})});n("#selector").selectize({valueField:"hash",labelField:"title",searchField:"html",maxItems:12,create:!1,score:function(){return function(){return 1}},render:{option:function(n){return"<div>"+n.html+"<\/div>"}},load:function(t,i){if(!t.length)return i();n.ajax({url:window.location.origin+"/api/Search?query="+encodeURIComponent(t),type:"GET",error:function(){i()},success:function(t){n("#selector").selectize()[0].selectize.clearOptions();i(t)}})}})})();